---
import { Icon } from 'astro-icon/components'

const plans = [
  {
    categories: [
      {
        name: 'Individual Tax Returns',
        features: [
          {
            name: 'Self-Assessment Tax Return',
            check: true,
          },
          {
            name: 'Register for Self-Assessment or CIS online',
            check: true,
          },
        ],
      },
    ],
  },
]

const categories = [
  {
    name: 'Individual Tax Returns',
    rows: [
      {
        name: 'Self-Assessment Tax Return',
        data: [
          {
            check: true,
          },
        ],
      },
      {
        name: 'Register for Self-Assessment or CIS online',
        data: [
          {
            check: true,
          },
        ],
      },
    ],
  },
]
---

<section id='ctable' class='py-16 sm:py-20'>
  <div class='mx-auto lg:max-w-7xl'>
    <!-- Comparison table -->
    <div>
      <!-- xs to lg -->
      <div class='space-y-24 lg:hidden'>
        {
          plans.map(plan => (
            <section>
              {plan.categories.map(category => (
                <table class='w-full'>
                  <caption class='border-t border-gray-200 px-4 py-3 pt-8 text-start text-sm font-bold text-white'>
                    <span class='-mx-5 rounded-xl bg-lime-600 px-4 py-2'>
                      {category.name}
                    </span>
                  </caption>
                  <thead>
                    <tr>
                      <th class='sr-only' scope='col'>
                        Feature
                      </th>
                      <th class='sr-only' scope='col'>
                        Included
                      </th>
                    </tr>
                  </thead>
                  <tbody class='divide-y divide-gray-200'>
                    {category.features.map(feature => (
                      <tr>
                        <th
                          class='px-4 py-5 text-start text-sm font-normal whitespace-nowrap'
                          scope='row'
                        >
                          {feature.name}
                        </th>
                        <td class='py-5 pe-4'>
                          {feature.check ? (
                            <Icon
                              name='lucide:check'
                              class='ms-auto size-5 flex-shrink-0'
                            />
                          ) : (
                            <Icon
                              name='lucide:minus'
                              class='ms-auto size-5 flex-shrink-0 text-gray-400'
                            />
                          )}
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              ))}
            </section>
          ))
        }
      </div>

      <!-- lg+ -->
      <div class='hidden lg:block'>
        <table class='h-px w-full'>
          <caption class='sr-only'>Accounting plan comparison</caption>
          <tbody class='border-t border-gray-200'>
            {
              categories.map(category => (
                <>
                  <tr>
                    <th
                      class='ps-6 pt-8 pb-4 text-start font-bold text-white'
                      colspan='5'
                      scope='colgroup'
                    >
                      <span class='-mx-6 rounded-xl bg-lime-600 px-4 py-2'>
                        {category.name}
                      </span>
                    </th>
                  </tr>
                  <>
                    {category.rows.map(row => (
                      <tr class='border-b border-gray-200'>
                        <th
                          class='py-5 ps-6 pe-6 text-start text-sm font-normal whitespace-nowrap text-gray-600'
                          scope='row'
                        >
                          {row.name}
                        </th>

                        {row.data.map(entry => (
                          <td class='px-6 py-5'>
                            {entry.check ? (
                              <Icon
                                name='lucide:check'
                                class='mx-auto size-5 flex-shrink-0'
                              />
                            ) : (
                              <Icon
                                name='lucide:minus'
                                class='mx-auto size-5 flex-shrink-0 text-gray-400'
                              />
                            )}
                          </td>
                        ))}
                      </tr>
                    ))}
                  </>
                </>
              ))
            }
          </tbody>
        </table>
      </div>
      <!-- End lg+ -->
    </div>
    <!-- End Comparison table -->
  </div>
</section>
